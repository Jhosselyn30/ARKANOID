

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arkanoid en JS</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas></canvas>
    <script>
        const canvas = document.querySelector("canvas")
        const ctx = canvas.getContext("2d")//2d rendering context

        canvas.width = 448;
        canvas.height = 400;
        /*Variables del juego*/
      

        /*VARIABLES DE LA PELOTA*/
        const ballRadius =3;
        
        //posicion de la pelota
        let x = canvas.width / 2
        let y = canvas.height - 30
        
        //velocidad de la pelotta
        let dx = -3 
        let dy = -3

        /*VARIABLES DE LA PALETA*/
        const paddleHeight = 10;
        const paddleWidth = 50;

        let paddleX = (canvas.width - paddleWidth)/2
        let paddleY = canvas.height - paddleHeight - 10

        let rightPressed = false
        let leftPressed =false 

        const PADDLE_SENSITIVITY = 7

        function initializeGame() {
            x = canvas.width / 2;
            y = canvas.height - 30;
            dx = -3;
            dy = -3;
        } 

        function drawBall(){
            ctx.beginPath() //iniciar el trazado
            ctx.arc(x,y,ballRadius,0,Math.PI * 2)
            ctx.fillStyle='#fff'
            ctx.fill()
            ctx.closePath() //terminar el trazado
        }

        function drawPaddle(){
            ctx.fillRect(
                paddleX, //coordenada x
                paddleY, //coordena y
                paddleWidth, //ancho del dibujo
                paddleHeight //alto del dibujo
            )
        }

        function drawBricks(){}

        function colisionDetection(){}

        function ballMovement(){
            //rebotar las pelotas en los laterales
            if (
                x + dx > canvas.width -ballRadius || //pared derecha
                x + dx < ballRadius //pared izquierda
            ) {
                dx = -dx
            }
            //rebotar en la parte de arriba
            if (y+dy < ballRadius){
                dy = -dy
            }

            //pelota toca la pala
            const isBallSameXAsPaddle = 
                x > paddleX &&
                x < paddleX +paddleWidth

            const isBallTouchingPaddle = 
                y +dy >paddleY

            if (isBallSameXAsPaddle && isBallTouchingPaddle){
                dy = -dy //cambiamos la direccion de la pelota
            }
            else if(y+dy>canvas.height-ballRadius)//la pelota toca el suelo
            {
            console.log('game over')
            initializeGame();
            }

            //mover la pelota
            x += dx
            y += dy
        }

        function paddleMovement(){
            if (rightPressed && paddleX < canvas.width - paddleWidth){
                paddleX += PADDLE_SENSITIVITY
            }else if (leftPressed && paddleX>0){
                paddleX -= PADDLE_SENSITIVITY
            }
        }

        function cleanCanvas(){
            ctx.clearRect(0, 0, canvas.width, canvas.height)
        }

        function initEvents (){
            document.addEventListener('keydown',keyDowHandler)
            document.addEventListener('keyup',keyUpHandler)

            function keyDowHandler(event){
                const {key} = event
                if (key === 'Right' || key === 'ArrowRight'){
                    rightPressed = true
                } else if (key === 'left' || key === 'ArrowLeft'){
                    leftPressed=true
                }
            }

            function keyUpHandler(event){
                const {key} = event
                if (key === 'Right' || key === 'ArrowRight'){
                    rightPressed = false
                } else if (key === 'left' || key === 'ArrowLeft'){
                    leftPressed=false
                }
            }
        }



        function draw (){
            console.log({rightPressed,leftPressed})
            cleanCanvas()
            //dibujar los elementos del juego
            drawBall()
            drawPaddle()
            drawBricks()
            //drawScore()

            //colisiones y movimientos 
            colisionDetection()
            ballMovement()
            paddleMovement()

            window.requestAnimationFrame(draw)
        }
        initializeGame();
        draw()
        initEvents ()
    </script>
</body>
</html>